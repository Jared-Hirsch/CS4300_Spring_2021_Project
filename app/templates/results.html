<html>

<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/static/main.css">
  <link rel="stylesheet" href="/static/results.css">
</head>

<body>
  <!-- Nav -->
  <nav id="nav">
    <div class="nav-container">
      <span class="nav-sides"><a href="/" id="nav-logo">simplay</a></span>
      <span>
        <form action="results">
          <div class="input-container">
            <input type="text" class="query" id="query" name="input_query"
              value="{{ results[0]['artist_name'] }} | {{ results[0]['track_name'] }}"
              placeholder="Artist Name | Song Name">
            <i class="fa fa-search" id="search-icon"></i>
          </div>

          <div id="slider">
            <label for="lyr" class="label"> Audio Similarity </label>
            <input type="range" name="lyrical_sim" min="0" max="100" value="50" class="slider" id="lyr">
            <label for="lyr" class="label"> Lyrical Similarity </label>
          </div>

          <button type="submit" class="btn" id="btn-prim"> Create my Playlist </button>
        </form>
      </span>
      <span class="nav-sides" id="nav-logo"> </span>
    </div>
  </nav>

  <!-- Tint -->
  <div id="tint"></div>

  <!-- Playlist heading -->
  <div class="flex-container">
    <div>
      <h3>Playlist similar to...</h3>
      <h2>{{ results[0]['track_name'] }}</h2>
      <h3>by {{ results[0]['artist_name'] }} </h3>
    </div>

    <!-- Results -->
    <table id="songs">
      <tr>
        <th class="label">Song Title</th>
        <th class="label">Artist</th>
        <th class="label">Similarity Score</th>
      </tr>

      {% for res in results[1] %}
      <tr class="song_row" id="{{ res[1]['track_id'] }}" onclick="open_spot(this.id);" style="cursor:hand">
        <td> {{ res[1]['track_name'] }} </td>
        <td> {{ res[1]['artist_name'] }} </td>
        <td> {{ res[0] }} </td>
      </tr>
      {% endfor %}
    </table>
  </div>

  <!-- Footer -->
  <footer>
    <span>Student Names:</span>
    {% for netid in netids %}
    <span>{{ netid }} </span>
    {% endfor %}
  </footer>

</body>

<script>
  // Open spotify links
  function open_spot(uri) {
    window.open("https://open.spotify.com/track/" + uri, '_blank');
  }

  // New search interaction
  document.getElementById('query').onclick = function () {
    document.getElementById('query').style.width = '500';
    document.getElementById('nav').style.height = '180px';
    document.getElementById('search-icon').style.visibility = 'hidden';
    document.getElementById('slider').style.display = 'block';
    document.getElementById('btn-prim').style.display = 'block';
    document.getElementById('tint').style.display = 'block';
    document.getElementById('query').style.cursor = 'text';
  };
  document.getElementById('tint').onclick = function () {
    document.getElementById('query').style.width = '400';
    document.getElementById('nav').style.height = '70px';
    document.getElementById('search-icon').style.visibility = 'visible';
    document.getElementById('slider').style.display = 'none';
    document.getElementById('btn-prim').style.display = 'none';
    document.getElementById('tint').style.display = 'none';
    document.getElementById('query').style.cursor = 'pointer';
  };
</script>


</html>